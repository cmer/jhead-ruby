<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
	<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />

	<title>Class: Jhead</title>

	<link rel="stylesheet" href="./rdoc.css" type="text/css" media="screen" />

	<script src="./js/jquery.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="./js/thickbox-compressed.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="./js/quicksearch.js" type="text/javascript"
		charset="utf-8"></script>
	<script src="./js/darkfish.js" type="text/javascript"
		charset="utf-8"></script>

</head>
<body class="class">

	<div id="metadata">
		<div id="home-metadata">
			<div id="home-section" class="section">
        <h3 class="section-header">
          <a href="./index.html">Home</a>
          <a href="./index.html#classes">Classes</a>
          <a href="./index.html#methods">Methods</a>
        </h3>
			</div>
		</div>

		<div id="file-metadata">
			<div id="file-list-section" class="section">
				<h3 class="section-header">In Files</h3>
				<div class="section-body">
					<ul>
					
						<li><a href="./jhead_rb.html?TB_iframe=true&amp;height=550&amp;width=785"
							class="thickbox" title="jhead.rb">jhead.rb</a></li>
					
					</ul>
				</div>
			</div>

			
		</div>

		<div id="class-metadata">

			<!-- Parent Class -->
			
			<div id="parent-class-section" class="section">
				<h3 class="section-header">Parent</h3>
				
				<p class="link">Object</p>
				
			</div>
			

			<!-- Namespace Contents -->
			
			<div id="namespace-list-section" class="section">
				<h3 class="section-header">Namespace</h3>
				<ul class="link-list">
					
					<li><span class="type">CLASS</span> <a href="Jhead/JheadError.html">Jhead::JheadError</a></li>
					
				</ul>
			</div>
			

			<!-- Method Quickref -->
			
			<div id="method-list-section" class="section">
				<h3 class="section-header">Methods</h3>
				<ul class="link-list">
					
					<li><a href="#method-c-call">::call</a></li>
					
					<li><a href="#method-c-new">::new</a></li>
					
					<li><a href="#method-i-adjust_date">#adjust_date</a></li>
					
					<li><a href="#method-i-adjust_time">#adjust_time</a></li>
					
					<li><a href="#method-i-auto_rotate">#auto_rotate</a></li>
					
					<li><a href="#method-i-clear_rotation_tag">#clear_rotation_tag</a></li>
					
					<li><a href="#method-i-comment%3D">#comment=</a></li>
					
					<li><a href="#method-i-data">#data</a></li>
					
					<li><a href="#method-i-date_time%3D">#date_time=</a></li>
					
					<li><a href="#method-i-delete_comment">#delete_comment</a></li>
					
					<li><a href="#method-i-delete_exif">#delete_exif</a></li>
					
					<li><a href="#method-i-delete_iptc">#delete_iptc</a></li>
					
					<li><a href="#method-i-delete_thumbnails">#delete_thumbnails</a></li>
					
					<li><a href="#method-i-delete_unknown">#delete_unknown</a></li>
					
					<li><a href="#method-i-delete_xmp">#delete_xmp</a></li>
					
					<li><a href="#method-i-exif%3F">#exif?</a></li>
					
					<li><a href="#method-i-height">#height</a></li>
					
					<li><a href="#method-i-load_comment">#load_comment</a></li>
					
					<li><a href="#method-i-make_exif">#make_exif</a></li>
					
					<li><a href="#method-i-many%3F">#many?</a></li>
					
					<li><a href="#method-i-match">#match</a></li>
					
					<li><a href="#method-i-parse_tag">#parse_tag</a></li>
					
					<li><a href="#method-i-parse_value">#parse_value</a></li>
					
					<li><a href="#method-i-pure_jpg">#pure_jpg</a></li>
					
					<li><a href="#method-i-regenerate_thumbnail">#regenerate_thumbnail</a></li>
					
					<li><a href="#method-i-rename">#rename</a></li>
					
					<li><a href="#method-i-rename_like">#rename_like</a></li>
					
					<li><a href="#method-i-replace_thumbnail">#replace_thumbnail</a></li>
					
					<li><a href="#method-i-save_comment">#save_comment</a></li>
					
					<li><a href="#method-i-save_thumbnail">#save_thumbnail</a></li>
					
					<li><a href="#method-i-to_hash">#to_hash</a></li>
					
					<li><a href="#method-i-transplant_exif">#transplant_exif</a></li>
					
					<li><a href="#method-i-update_exif_time_stamp">#update_exif_time_stamp</a></li>
					
					<li><a href="#method-i-update_system_time_stamp">#update_system_time_stamp</a></li>
					
					<li><a href="#method-i-width">#width</a></li>
					
					<li><a href="#method-i-write_with_temp">#write_with_temp</a></li>
					
				</ul>
			</div>
			

			<!-- Included Modules -->
			
		</div>

		<div id="project-metadata">
			
			

			<div id="classindex-section" class="section project-section">
				<h3 class="section-header">Class Index
					<span class="search-toggle"><img src="./images/find.png"
						height="16" width="16" alt="[+]"
						title="show/hide quicksearch" /></span></h3>
				<form action="#" method="get" accept-charset="utf-8" class="initially-hidden">
				<fieldset>
					<legend>Quicksearch</legend>
					<input type="text" name="quicksearch" value=""
						class="quicksearch-field" />
				</fieldset>
				</form>

				<ul class="link-list">
				
					<li><a href="./Jhead.html">Jhead</a></li>
				
					<li><a href="./Jhead/JheadError.html">Jhead::JheadError</a></li>
				
				</ul>
				<div id="no-class-search-results" style="display: none;">No matching classes.</div>
			</div>

			
		</div>
	</div>

	<div id="documentation">
		<h1 class="class">Jhead</h1>

		<div id="description">
			<p>
Wrapper for jhead
</p>

		</div>

		<!-- Constants -->
		
		<div id="constants-list" class="section">
			<h3 class="section-header">Constants</h3>
			<dl>
			
				<dt><a name="VERSION">VERSION</a></dt>
				
				<dd class="description"><p>
This wrapper version.
</p></dd>
				
			
				<dt><a name="JHEAD_BINARY">JHEAD_BINARY</a></dt>
				
				<dd class="description"><p>
jhead binary
</p></dd>
				
			
				<dt><a name="JHEAD_VERSION">JHEAD_VERSION</a></dt>
				
				<dd class="description"><p>
jhead version on the system.
</p></dd>
				
			
				<dt><a name="TAGS">TAGS</a></dt>
				
				<dd class="description"><p>
jhead EXIF tags.
</p></dd>
				
			
			</dl>
		</div>
		

		<!-- Attributes -->
		

		<!-- Methods -->
		
		<div id="public-class-method-details" class="method-section section">
			<h3 class="section-header">Public Class Methods</h3>

		
			<div id="call-method" class="method-detail ">
				<a name="method-c-call"></a>

				<div class="method-heading">
				
					<span class="method-name">call</span><span
						class="method-args">(*args)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Function to execute a jhead call to the system. Pass jhead command line
options in parameter.
</p>
					

					
					<div class="method-source-code"
						id="call-source">
<pre>
    <span class="ruby-comment cmt"># File jhead.rb, line 36</span>
36:   <span class="ruby-keyword kw">def</span> <span class="ruby-constant">Jhead</span>.<span class="ruby-identifier">call</span>(*<span class="ruby-identifier">args</span>)
37:     <span class="ruby-identifier">cmd</span> = <span class="ruby-identifier">args</span>.<span class="ruby-identifier">unshift</span>(<span class="ruby-constant">JHEAD_BINARY</span>) * <span class="ruby-value str">&quot; &quot;</span>
38:     <span class="ruby-identifier">cmd</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot; 2&gt;&amp;1&quot;</span>
39:     <span class="ruby-identifier">out</span> = <span class="ruby-node">`#{cmd}`</span>.<span class="ruby-identifier">strip</span>
40:     <span class="ruby-identifier">raise</span>(<span class="ruby-constant">JheadError</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">cmd</span>), <span class="ruby-identifier">out</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">$?</span>.<span class="ruby-identifier">exitstatus</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
41:     <span class="ruby-identifier">out</span>
42:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="new-method" class="method-detail ">
				<a name="method-c-new"></a>

				<div class="method-heading">
				
					<span class="method-name">new</span><span
						class="method-args">(pattern, match_opts = {})</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="new-source">
<pre>
    <span class="ruby-comment cmt"># File jhead.rb, line 80</span>
80:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">pattern</span>, <span class="ruby-identifier">match_opts</span> = {})
81:     <span class="ruby-comment cmt">#TODO: should use @target = Dir[pattern]?</span>
82:     <span class="ruby-ivar">@pattern</span> = <span class="ruby-identifier">pattern</span>.<span class="ruby-identifier">shellescape</span>
83:     <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">match</span>(<span class="ruby-identifier">match_opts</span>)
84:     <span class="ruby-keyword kw">yield</span> <span class="ruby-keyword kw">self</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">block_given?</span>
85:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
		</div>
	
		<div id="public-instance-method-details" class="method-section section">
			<h3 class="section-header">Public Instance Methods</h3>

		
			<div id="adjust-date-method" class="method-detail ">
				<a name="method-i-adjust_date"></a>

				<div class="method-heading">
				
					<span class="method-name">adjust_date</span><span
						class="method-args">(date1, date2)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Works like -ta, but for specifying large date offsets, to be used when
fixing dates from cameras where the date was set incorrectly, such as
having date and time reset by battery removal on some cameras. This feature
is best for adjusting dates on pictures taken over a large range of dates.
For pictures all taken the same date, the &#8220;-ds&#8221; option is often
easier to use.
</p>
<p>
Because different months and years have different numbers of days in them,
a simple offset for months, days, years would lead to unexpected results at
times. The time offset is thus specified as a difference between two dates,
so that jhead can figure out exactly how many days the timestamp needs to
be adjusted by, including leap years and daylight savings time changes. The
dates are specified as yyyy:mm:dd. For sub-day adjustments, a time of day
can also be included, by specifying yyyy:nn:dd/hh:mm or yyyy:mm:dd/hh:mm:ss
</p>
<p>
Examples: Year on camera was set to 2005 instead of 2004 for pictures taken
in April
</p>
<pre>
  jhead -da2005:03:01-2004:03:01
</pre>
<p>
Default camera date is 2002:01:01, and date was reset on 2005:05:29 at
11:21 am
</p>
<pre>
  jhead -da2005:05:29/11:21-2002:01:01</pre>
					

					
					<div class="method-source-code"
						id="adjust-date-source">
<pre>
     <span class="ruby-comment cmt"># File jhead.rb, line 383</span>
383:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">adjust_date</span>(<span class="ruby-identifier">date1</span>, <span class="ruby-identifier">date2</span>)
384:     <span class="ruby-constant">Jhead</span>.<span class="ruby-identifier">call</span>(<span class="ruby-value str">&quot;-da&quot;</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">date1</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">'-'</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">date2</span>, <span class="ruby-ivar">@pattern</span>)
385:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="adjust-time-method" class="method-detail ">
				<a name="method-i-adjust_time"></a>

				<div class="method-heading">
				
					<span class="method-name">adjust_time</span><span
						class="method-args">(timediff)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Adjust time stored in the Exif header by h:mm backwards or forwards. Useful
when having taken pictures with the wrong time set on the camera, such as
after travelling across time zones, or when daylight savings time has
changed. This option uses the time from the &#8220;DateTimeOriginal&#8221;
(tag 0x9003) field, but sets all the time fields in the Exif header to the
new value.
</p>
<p>
Examples: Adjust time one hour forward (you would use this after you forgot
to set daylight savings time on the digicam)
</p>
<pre>
  jhead -ta+1:00 *.jpg
</pre>
<p>
Adjust time back by 23 seconds (you would use this to get the timestamps
from two digicams in sync after you found that they didn&#8217;t quite
align)
</p>
<pre>
  jhead -ta-0:00:23 *.jpg
</pre>
<p>
Adjust time forward by 2 days and 1 hour (49 hours)
</p>
<pre>
  jhead -ta+49 *.jpg</pre>
					

					
					<div class="method-source-code"
						id="adjust-time-source">
<pre>
     <span class="ruby-comment cmt"># File jhead.rb, line 352</span>
352:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">adjust_time</span>(<span class="ruby-identifier">timediff</span>)
353:     <span class="ruby-constant">Jhead</span>.<span class="ruby-identifier">call</span>(<span class="ruby-value str">&quot;-ta&quot;</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">timediff</span>, <span class="ruby-ivar">@pattern</span>)
354:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="auto-rotate-method" class="method-detail ">
				<a name="method-i-auto_rotate"></a>

				<div class="method-heading">
				
					<span class="method-name">auto_rotate</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Using the &#8216;Orientation&#8217; tag of the Exif header, rotate the
image so that it is upright. The program &#8216;jpegtran&#8217; is used to
perform the rotation. This program is present in most Linux distributions.
For windows, you need to get a copy of it. After rotation, the orientation
tag of the Exif header is set to &#8216;1&#8217; (normal orientation). The
Exif thumbnail is also rotated. Other fields of the Exif header, including
dimensions are untouched, but the JPEG height/width are adjusted. This
feature is especially useful with newer digital cameras, which set the
orientation field in the Exif header automatically using a built in
orientation sensor in the camera.
</p>
					

					
					<div class="method-source-code"
						id="auto-rotate-source">
<pre>
     <span class="ruby-comment cmt"># File jhead.rb, line 489</span>
489:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">auto_rotate</span>
490:     <span class="ruby-constant">Jhead</span>.<span class="ruby-identifier">call</span>(<span class="ruby-value str">&quot;-autorot&quot;</span>, <span class="ruby-ivar">@pattern</span>)
491:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="clear-rotation-tag-method" class="method-detail ">
				<a name="method-i-clear_rotation_tag"></a>

				<div class="method-heading">
				
					<span class="method-name">clear_rotation_tag</span><span
						class="method-args">(regen_thumbnail = false)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Clears the Exif header rotation tag without altering the image. You may
find that your images have rotation tags in them from your camera, but you
already rotated them with some lossless tool without clearing the rotation
tag. Now your friendly browser rotates the images on you again because the
image rotation tag still indicates the image should be rotated. Use this
method to fix this problem. You may also want to regenerate the thumbnail
setting the regen_thumbnail option to true.
</p>
					

					
					<div class="method-source-code"
						id="clear-rotation-tag-source">
<pre>
     <span class="ruby-comment cmt"># File jhead.rb, line 501</span>
501:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">clear_rotation_tag</span>(<span class="ruby-identifier">regen_thumbnail</span> = <span class="ruby-keyword kw">false</span>)
502:     <span class="ruby-identifier">option</span> = <span class="ruby-value str">&quot;-norot&quot;</span>
503:     <span class="ruby-identifier">option</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot; -rgt&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">regen_thumbnail</span>
504:     <span class="ruby-constant">Jhead</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">option</span>, <span class="ruby-ivar">@pattern</span>)
505:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="comment--method" class="method-detail ">
				<a name="method-i-comment%3D"></a>

				<div class="method-heading">
				
					<span class="method-name">comment=</span><span
						class="method-args">(comment)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Replace comment with comment from command line.
</p>
					

					
					<div class="method-source-code"
						id="comment--source">
<pre>
     <span class="ruby-comment cmt"># File jhead.rb, line 227</span>
227:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">comment=</span>(<span class="ruby-identifier">comment</span>)
228:     <span class="ruby-constant">Jhead</span>.<span class="ruby-identifier">call</span>(<span class="ruby-value str">&quot;-cl&quot;</span>, <span class="ruby-identifier">comment</span>.<span class="ruby-identifier">shellescape</span>, <span class="ruby-ivar">@pattern</span>)
229:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="data-method" class="method-detail ">
				<a name="method-i-data"></a>

				<div class="method-heading">
				
					<span class="method-name">data</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
TODO rename to self.exif or not? (<= remove filename, etc.)
</p>
					

					
					<div class="method-source-code"
						id="data-source">
<pre>
     <span class="ruby-comment cmt"># File jhead.rb, line 114</span>
114:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">data</span>
115:     <span class="ruby-identifier">data</span> = <span class="ruby-constant">Jhead</span>.<span class="ruby-identifier">call</span>(<span class="ruby-ivar">@pattern</span>).<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;\n\n&quot;</span>).<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span> <span class="ruby-identifier">p</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">&quot;\n&quot;</span>) }
116:     <span class="ruby-identifier">data</span>.<span class="ruby-identifier">map!</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">p</span><span class="ruby-operator">|</span>
117:       <span class="ruby-identifier">h</span> = <span class="ruby-constant">Hash</span>.<span class="ruby-identifier">new</span>
118:       <span class="ruby-identifier">p</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">l</span><span class="ruby-operator">|</span>
119:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">l</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp re">/(.+?)\s*:\s*(.+)/</span>
120:           <span class="ruby-identifier">h</span>[<span class="ruby-identifier">parse_tag</span> <span class="ruby-node">$1</span>] = <span class="ruby-identifier">parse_value</span> <span class="ruby-node">$2</span>
121:         <span class="ruby-keyword kw">end</span>
122:       <span class="ruby-keyword kw">end</span>
123:       <span class="ruby-identifier">h</span>
124:     <span class="ruby-keyword kw">end</span>
125: 
126:     <span class="ruby-identifier">data</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">data</span>.<span class="ruby-identifier">first</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">data</span>
127:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="date-time--method" class="method-detail ">
				<a name="method-i-date_time%3D"></a>

				<div class="method-heading">
				
					<span class="method-name">date_time=</span><span
						class="method-args">(time)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Sets the date and time stored in the Exif header to what is specified on
the command line. This option changes all the date fields in the Exif
header.
</p>
					

					
					<div class="method-source-code"
						id="date-time--source">
<pre>
     <span class="ruby-comment cmt"># File jhead.rb, line 390</span>
390:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">date_time=</span>(<span class="ruby-identifier">time</span>)
391:     <span class="ruby-constant">Jhead</span>.<span class="ruby-identifier">call</span>(<span class="ruby-value str">&quot;-ts&quot;</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">time</span>.<span class="ruby-identifier">strftime</span>(<span class="ruby-value str">&quot;%Y:%m:%d-%H:%M:%S&quot;</span>), <span class="ruby-ivar">@pattern</span>)
392:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="delete-comment-method" class="method-detail ">
				<a name="method-i-delete_comment"></a>

				<div class="method-heading">
				
					<span class="method-name">delete_comment</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Delete comment field from the JPEG header. Note that the comment is not
part of the Exif header.
</p>
					

					
					<div class="method-source-code"
						id="delete-comment-source">
<pre>
     <span class="ruby-comment cmt"># File jhead.rb, line 170</span>
170:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">delete_comment</span>
171:     <span class="ruby-constant">Jhead</span>.<span class="ruby-identifier">call</span>(<span class="ruby-value str">&quot;-dc&quot;</span>, <span class="ruby-ivar">@pattern</span>)
172:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="delete-exif-method" class="method-detail ">
				<a name="method-i-delete_exif"></a>

				<div class="method-heading">
				
					<span class="method-name">delete_exif</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Delete the Exif header entirely. This leaves other sections (IPTC, XMP,
comment) intact.
</p>
					

					
					<div class="method-source-code"
						id="delete-exif-source">
<pre>
     <span class="ruby-comment cmt"># File jhead.rb, line 176</span>
176:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">delete_exif</span>
177:     <span class="ruby-constant">Jhead</span>.<span class="ruby-identifier">call</span>(<span class="ruby-value str">&quot;-de&quot;</span>, <span class="ruby-ivar">@pattern</span>)
178:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="delete-iptc-method" class="method-detail ">
				<a name="method-i-delete_iptc"></a>

				<div class="method-heading">
				
					<span class="method-name">delete_iptc</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Delete IPTC section (if present). Leaves other sections intact.
</p>
					

					
					<div class="method-source-code"
						id="delete-iptc-source">
<pre>
     <span class="ruby-comment cmt"># File jhead.rb, line 181</span>
181:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">delete_iptc</span>
182:     <span class="ruby-constant">Jhead</span>.<span class="ruby-identifier">call</span>(<span class="ruby-value str">&quot;-di&quot;</span>, <span class="ruby-ivar">@pattern</span>)
183:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="delete-thumbnails-method" class="method-detail ">
				<a name="method-i-delete_thumbnails"></a>

				<div class="method-heading">
				
					<span class="method-name">delete_thumbnails</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Delete thumbnails from the Exif header, but leave the interesting parts
intact. This option truncates the thumbnail from the Exif header, provided
that the thumbnail is the last part of the Exif header (which so far as I
know is always the case). Exif headers have a built-in thumbnail, which is
typically 240x160 and 10k in size. This thumbnail is used by digital
cameras. Windows XP, as well as various photo viewing software may also use
this thumbnail if present, but work just fine if it isn&#8217;t.
</p>
					

					
					<div class="method-source-code"
						id="delete-thumbnails-source">
<pre>
     <span class="ruby-comment cmt"># File jhead.rb, line 410</span>
410:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">delete_thumbnails</span>
411:     <span class="ruby-constant">Jhead</span>.<span class="ruby-identifier">call</span>(<span class="ruby-value str">&quot;-dt&quot;</span>, <span class="ruby-ivar">@pattern</span>)
412:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="delete-unknown-method" class="method-detail ">
				<a name="method-i-delete_unknown"></a>

				<div class="method-heading">
				
					<span class="method-name">delete_unknown</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Delete any sections that jhead doesn&#8217;t know about. Leaves Exif, XMP,
IPTC and comment sections intact.
</p>
					

					
					<div class="method-source-code"
						id="delete-unknown-source">
<pre>
     <span class="ruby-comment cmt"># File jhead.rb, line 192</span>
192:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">delete_unknown</span>
193:     <span class="ruby-constant">Jhead</span>.<span class="ruby-identifier">call</span>(<span class="ruby-value str">&quot;-du&quot;</span>, <span class="ruby-ivar">@pattern</span>)
194:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="delete-xmp-method" class="method-detail ">
				<a name="method-i-delete_xmp"></a>

				<div class="method-heading">
				
					<span class="method-name">delete_xmp</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Delete XMP section (if present). Leaves other sections intact.
</p>
					

					
					<div class="method-source-code"
						id="delete-xmp-source">
<pre>
     <span class="ruby-comment cmt"># File jhead.rb, line 186</span>
186:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">delete_xmp</span>
187:     <span class="ruby-constant">Jhead</span>.<span class="ruby-identifier">call</span>(<span class="ruby-value str">&quot;-dx&quot;</span>, <span class="ruby-ivar">@pattern</span>)
188:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="exif--method" class="method-detail ">
				<a name="method-i-exif%3F"></a>

				<div class="method-heading">
				
					<span class="method-name">exif?</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="exif--source">
<pre>
     <span class="ruby-comment cmt"># File jhead.rb, line 101</span>
101:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">exif?</span>
102:     <span class="ruby-comment cmt">#TODO could be better?</span>
103:     <span class="ruby-comment cmt"># Not good because it can rescues a file doesn't exist error.</span>
104:     <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">many?</span>
105:       <span class="ruby-operator">!</span><span class="ruby-constant">Jhead</span>.<span class="ruby-identifier">call</span>(<span class="ruby-value str">&quot;-exonly&quot;</span>, <span class="ruby-value str">&quot;-c&quot;</span>, <span class="ruby-ivar">@pattern</span>).<span class="ruby-identifier">empty?</span> <span class="ruby-keyword kw">rescue</span> <span class="ruby-keyword kw">false</span>
106:     <span class="ruby-keyword kw">end</span>
107:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="height-method" class="method-detail ">
				<a name="method-i-height"></a>

				<div class="method-heading">
				
					<span class="method-name">height</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Get the height of the jpeg file.
</p>
					

					
					<div class="method-source-code"
						id="height-source">
<pre>
     <span class="ruby-comment cmt"># File jhead.rb, line 135</span>
135:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">height</span>
136:     <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">resolution</span>.<span class="ruby-identifier">last</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">resolution</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">many?</span>
137:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="load-comment-method" class="method-detail ">
				<a name="method-i-load_comment"></a>

				<div class="method-heading">
				
					<span class="method-name">load_comment</span><span
						class="method-args">(name)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Replace comment with text from file.
</p>
					

					
					<div class="method-source-code"
						id="load-comment-source">
<pre>
     <span class="ruby-comment cmt"># File jhead.rb, line 222</span>
222:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">load_comment</span>(<span class="ruby-identifier">name</span>)
223:     <span class="ruby-constant">Jhead</span>.<span class="ruby-identifier">call</span>(<span class="ruby-value str">&quot;-ci&quot;</span>, <span class="ruby-identifier">name</span>.<span class="ruby-identifier">shellescape</span>, <span class="ruby-ivar">@pattern</span>)
224:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="make-exif-method" class="method-detail ">
				<a name="method-i-make_exif"></a>

				<div class="method-heading">
				
					<span class="method-name">make_exif</span><span
						class="method-args">(thumbnail = false)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Creates minimal Exif header. Exif header contains date/time, and empty
thumbnail fields only. Date/time set to file time by default. set the
thumbnail option to true if you want the Exif header to contain a
thumbnail. Note that Exif header creation is very limited at this time, and
no other fields can be added to the Exif header this way.
</p>
					

					
					<div class="method-source-code"
						id="make-exif-source">
<pre>
     <span class="ruby-comment cmt"># File jhead.rb, line 211</span>
211:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">make_exif</span>(<span class="ruby-identifier">thumbnail</span> = <span class="ruby-keyword kw">false</span>)
212:     <span class="ruby-identifier">option</span> = <span class="ruby-identifier">thumbnail</span> <span class="ruby-operator">?</span> <span class="ruby-value str">&quot;-mkexif -rgt&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-value str">&quot;-mkexif&quot;</span>
213:     <span class="ruby-constant">Jhead</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">option</span>, <span class="ruby-ivar">@pattern</span>)
214:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="many--method" class="method-detail ">
				<a name="method-i-many%3F"></a>

				<div class="method-heading">
				
					<span class="method-name">many?</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="many--source">
<pre>
     <span class="ruby-comment cmt"># File jhead.rb, line 109</span>
109:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">many?</span>
110:     <span class="ruby-constant">Dir</span>[<span class="ruby-ivar">@pattern</span>].<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>
111:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="match-method" class="method-detail ">
				<a name="method-i-match"></a>

				<div class="method-heading">
				
					<span class="method-name">match</span><span
						class="method-args">(opts)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Match specific files according to the options hash. This should be set
before executing an action method.
</p>
<ul>
<li><p>
Set :model to a specific camera model to
</p>
</li>
</ul>
<p>
restrict processing of files to those whose camera model, as indicated by
the Exif image information, contains the substring specified. For example,
the following command will list only images that are from an S100 camera:
</p>
<pre>
  Jhead.new(&quot;*.jpg&quot;).match(:model =&gt; &quot;S100&quot;).data
</pre>
<p>
I use this option to restrict my JPEG re-compressing to those images that
came from my Canon S100 digicam, (see the -cmd option). TODO implement -cmd
option?
</p>
<ul>
<li><p>
Set :exif_only to true to
</p>
</li>
</ul>
<p>
skip all files that don&#8217;t have an Exif header. This skips all files
that did not come directly from the digital camera, as most photo editing
software does not preserve the Exif header when saving pictures.
</p>
<ul>
<li><p>
Set :portrait_only or :landscape_only to true to
</p>
</li>
</ul>
<p>
operate only on images with portrait or landscape aspect ratio. Please note
that this is solely based on jpeg width and height values. Some browsers
may auto rotate the image on displaying it based on the Exif orientation
tag, so that images shot in portrait mode are displayed as portrait.
However, the image itself may not be stored in portrait orientation. The <a
href="Jhead.html#method-i-auto_rotate">auto_rotate</a> and <a
href="Jhead.html#method-i-clear_rotation_tag">clear_rotation_tag</a>
methods are useful for dealing with rotation issues.
</p>
					

					
					<div class="method-source-code"
						id="match-source">
<pre>
     <span class="ruby-comment cmt"># File jhead.rb, line 537</span>
537:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">match</span>(<span class="ruby-identifier">opts</span>)
538:     <span class="ruby-ivar">@pattern</span> = <span class="ruby-node">&quot;-model #{opts[:model]} #{@pattern}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">opts</span>.<span class="ruby-identifier">has_key?</span> <span class="ruby-value">:model</span>
539:     <span class="ruby-ivar">@pattern</span> = <span class="ruby-node">&quot;-exonly #{@pattern}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:exif_only</span>]
540:     <span class="ruby-ivar">@pattern</span> = <span class="ruby-node">&quot;-orp #{@pattern}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:portrait_only</span>]
541:     <span class="ruby-ivar">@pattern</span> = <span class="ruby-node">&quot;-orl #{@pattern}&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">opts</span>[<span class="ruby-value">:landscape_only</span>]
542:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="pure-jpg-method" class="method-detail ">
				<a name="method-i-pure_jpg"></a>

				<div class="method-heading">
				
					<span class="method-name">pure_jpg</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Delete all JPEG sections that aren&#8217;t necessary for rendering the
image. Strips any metadata that various applications may have left in the
image. A combination of the <a
href="Jhead.html#method-i-delete_exif">delete_exif</a>, <a
href="Jhead.html#method-i-delete_comment">delete_comment</a> and <a
href="Jhead.html#method-i-delete_unknown">delete_unknown</a> methods.
</p>
					

					
					<div class="method-source-code"
						id="pure-jpg-source">
<pre>
     <span class="ruby-comment cmt"># File jhead.rb, line 200</span>
200:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">pure_jpg</span>
201:     <span class="ruby-constant">Jhead</span>.<span class="ruby-identifier">call</span>(<span class="ruby-value str">&quot;-purejpg&quot;</span>, <span class="ruby-ivar">@pattern</span>)
202:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="regenerate-thumbnail-method" class="method-detail ">
				<a name="method-i-regenerate_thumbnail"></a>

				<div class="method-heading">
				
					<span class="method-name">regenerate_thumbnail</span><span
						class="method-args">(size = nil, clear_rot_tag = false, only_upright = false)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Regnerate Exif thumbnail. &#8216;size&#8217; specifies maximum height or
width of thumbnail. I added this option because I had a lot of images that
I had rotated with various tools that don&#8217;t update the Exif header.
But newer image browsers such as XnView make use of the Exif thumbnail, and
so the thumbnails would be different from the image itself. Note that the
rotation tag also needed to be cleared (<a
href="Jhead.html#method-i-clear_rotation_tag">clear_rotation_tag</a>
method). Typically, only images that are shot in portrait orientation are
afflicted with this. You can set the only_upright option to true to tell
jhead to only operate on images that are upright.
</p>
<p>
This option relies on &#8216;mogrify&#8217; program (from ImageMagick) to
regenerate the thumbnail. Linux users often already have this tool
pre-installed. Windows users have to go and download it. This option only
works if the image already contains a thumbnail.
</p>
					

					
					<div class="method-source-code"
						id="regenerate-thumbnail-source">
<pre>
     <span class="ruby-comment cmt"># File jhead.rb, line 466</span>
466:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">regenerate_thumbnail</span>(<span class="ruby-identifier">size</span> = <span class="ruby-keyword kw">nil</span>,
467:                            <span class="ruby-identifier">clear_rot_tag</span> = <span class="ruby-keyword kw">false</span>,
468:                            <span class="ruby-identifier">only_upright</span> = <span class="ruby-keyword kw">false</span>)
469:     <span class="ruby-identifier">option</span> = <span class="ruby-value str">&quot;-rgt&quot;</span>
470:     <span class="ruby-identifier">option</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">size</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">size</span>.<span class="ruby-identifier">nil?</span>
471:     <span class="ruby-identifier">option</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot; -norot&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">clear_rotation_tag</span>
472:     <span class="ruby-identifier">option</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot; -orp&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">only_upright</span>
473:     <span class="ruby-constant">Jhead</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">option</span>, <span class="ruby-ivar">@pattern</span>)
474:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="rename-method" class="method-detail ">
				<a name="method-i-rename"></a>

				<div class="method-heading">
				
					<span class="method-name">rename</span><span
						class="method-args">(arg = {:format => nil, :force => false, :extension => false})</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
This method causes files to be renamed and/or moved according to the Exif
header &#8220;DateTimeOriginal&#8221; field. If the file is not an Exif
file, or the DateTimeOriginal does not contain a valid value, the file date
is used. Renaming is by default restricted to files whose names consist
largely of digits. This effectively restricts renaming to files that have
not already been manually renamed, as the default sequential names from
digital cameras consist largely of digits.
</p>
<p>
Set the :force argument to true to force renaming of all files. it will
rename files regardless of original file name.
</p>
<p>
If the name includes &#8217;/&#8217; or &#8216;' (under windows), this is
interpreted as a new path for the file. If the new path does not exist, the
path will be created.
</p>
<p>
If the format argument is omitted, the file will be renamed to MMDD-HHMMSS.
If a format argument is provided, it will be passed to the strftime
function for formatting. In addition, if the format string contains
&#8217;%f&#8217;, this will substitute the original name of the file (minus
extension). A sequence number may also be included by including
&#8217;%i&#8217; in the format string. Leading zeros can be specified.
&#8217;%03i&#8217; for example will pad the numbers to &#8216;001&#8217;,
&#8216;002&#8217;&#8230; this works just like printf in C, but with
&#8217;%i&#8217; instead of &#8217;%d&#8217;. If the target name already
exists, the name will be appended with &#8220;a&#8221;, &#8220;b&#8221;,
&#8220;c&#8221;, etc, unless the name ends with a letter, in which case it
will be appended with &#8220;0&#8221;, &#8220;1&#8221;, &#8220;2&#8221;,
etc. This feature is especially useful if more than one digital camera was
used to take pictures of an event. By renaming them to a scheme according
to date, they will automatically appear in order of taking when viewed with
some sort of viewer like Xnview or AcdSee, and sorted by name. Or you could
use the <a
href="Jhead.html#method-i-update_system_time_stamp">update_system_time_stamp</a>
method and view the images sorted by date. Typically, one of the
carera&#8217;s date will be set not quite right, in which case you may have
to use the <a href="Jhead.html#method-i-adjust_time">adjust_time</a> or <a
href="Jhead.html#method-i-adjust_date">adjust_date</a> methods on those
files first.
</p>
<p>
Some of the more useful arguments for strftime are: %d  Day of month as
decimal number (01 – 31) %H  Hour in 24-hour format (00 – 23) %j  Day
of year as decimal number (001 – 366) %m  Month as decimal number (01 –
12) %M  Minute as decimal number (00 – 59) %S  Second as decimal number
(00 – 59) %U  Week of year as decimal number, with Sunday as first day of
week (00 – 53) %w  Weekday as decimal number (0 – 6; Sunday is 0) %y 
Year without century, as decimal number (00 – 99) %Y  Year with century,
as decimal number
</p>
<p>
Example:
</p>
<pre>
  Jhead.new(&quot;*.jpg&quot;) do |files|
    files.rename(&quot;%Y%m%d-%H%M%S&quot;)
  end
</pre>
<p>
This will rename files matched by *.jpg according to YYYYMMDD-HHMMSS
</p>
<p>
Note to Windows batch file users: &#8217;%&#8217; is used to deliminate
macros in Windows batch files. You must use %% to get one % passed to the
program. So from a batch file, you would have to write
&#8220;files.rename(&#8220;%%Y%%m%%d-%%H%%M%%S&#8221;) TODO do this in
Ruby? For a full listing of strftime arguments, look up the strftime C
function. Note that some arguments to the strftime function (not listed
here) produce strings with characters such as &#8217;/&#8217; and
&#8217;:&#8217; that may not be valid as part of a filename on various
systems.
</p>
<p>
(Windows only option) Set the :extension to true to rename files with the
same name but different extension as well. This is useful for renaming .AVI
files based on Exif file in .THM, or to rename sound annotation files or
raw files with jpeg files. Use together with &#8217;-n&#8217; option.
</p>
					

					
					<div class="method-source-code"
						id="rename-source">
<pre>
     <span class="ruby-comment cmt"># File jhead.rb, line 320</span>
320:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">rename</span>(<span class="ruby-identifier">arg</span> = {<span class="ruby-value">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">nil</span>, <span class="ruby-value">:force</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>, <span class="ruby-value">:extension</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-keyword kw">false</span>})
321:     <span class="ruby-identifier">option</span> = <span class="ruby-identifier">arg</span>[<span class="ruby-value">:force</span>] <span class="ruby-operator">?</span> <span class="ruby-value str">&quot;-nf&quot;</span> <span class="ruby-operator">:</span> <span class="ruby-value str">&quot;-n&quot;</span>
322:     <span class="ruby-identifier">option</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">arg</span>[<span class="ruby-value">:format</span>] <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">arg</span>[<span class="ruby-value">:format</span>].<span class="ruby-identifier">nil?</span>
323:     <span class="ruby-identifier">option</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-value str">&quot; -a&quot;</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">arg</span>[<span class="ruby-value">:extension</span>]
324:     <span class="ruby-constant">Jhead</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">option</span>, <span class="ruby-ivar">@pattern</span>)
325:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="rename-like-method" class="method-detail ">
				<a name="method-i-rename_like"></a>

				<div class="method-heading">
				
					<span class="method-name">rename_like</span><span
						class="method-args">(format = nil, force = false)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="rename-like-source">
<pre>
     <span class="ruby-comment cmt"># File jhead.rb, line 327</span>
327:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">rename_like</span>(<span class="ruby-identifier">format</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">force</span> = <span class="ruby-keyword kw">false</span>)
328:     <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">rename</span>(<span class="ruby-value">:format</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">format</span>, <span class="ruby-value">:force</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">force</span>)
329:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="replace-thumbnail-method" class="method-detail ">
				<a name="method-i-replace_thumbnail"></a>

				<div class="method-heading">
				
					<span class="method-name">replace_thumbnail</span><span
						class="method-args">(name)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Replace thumbnails from the Exif header. This only works if the Exif header
already contains an Exif header a thumbnail.
</p>
					

					
					<div class="method-source-code"
						id="replace-thumbnail-source">
<pre>
     <span class="ruby-comment cmt"># File jhead.rb, line 446</span>
446:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">replace_thumbnail</span>(<span class="ruby-identifier">name</span>)
447:     <span class="ruby-constant">Jhead</span>.<span class="ruby-identifier">call</span>(<span class="ruby-value str">&quot;-rt&quot;</span>, <span class="ruby-identifier">name</span>.<span class="ruby-identifier">shellescape</span>, <span class="ruby-ivar">@pattern</span>)
448:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="save-comment-method" class="method-detail ">
				<a name="method-i-save_comment"></a>

				<div class="method-heading">
				
					<span class="method-name">save_comment</span><span
						class="method-args">(name)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Save comment section to a file.
</p>
					

					
					<div class="method-source-code"
						id="save-comment-source">
<pre>
     <span class="ruby-comment cmt"># File jhead.rb, line 217</span>
217:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">save_comment</span>(<span class="ruby-identifier">name</span>)
218:     <span class="ruby-constant">Jhead</span>.<span class="ruby-identifier">call</span>(<span class="ruby-value str">&quot;-cs&quot;</span>, <span class="ruby-identifier">name</span>.<span class="ruby-identifier">shellescape</span>, <span class="ruby-ivar">@pattern</span>)
219:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="save-thumbnail-method" class="method-detail ">
				<a name="method-i-save_thumbnail"></a>

				<div class="method-heading">
				
					<span class="method-name">save_thumbnail</span><span
						class="method-args">(name)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Save the built in thumbnail from Jpegs that came from a digital camera. The
thumbnail lives inside the Exif header, and is a very low-res JPEG image.
Note that making any changes to a photo, except for with some programs,
generally wipes out the Exif header and with it the thumbnail. I
implemented this option because I kept getting asked about having such an
option. I don&#8217;t consider the built in thumbnails to be all that
useful - too low res. However, now you can see for yourself. I always
generate my thumbnails using ImageMagick (see end of this page). Like the
<a href="Jhead.html#method-i-transplant_exif">transplant_exif</a> method,
this feature has the &#8216;relative path&#8217; option for specifying the
thumbnail name. Whenever the <name> contains the characters
&#8217;&amp;i&#8217;, jhead will substitute the original filename for this
name. This allows creating a &#8216;relative name&#8217; when doing a whole
batch of files. For example, the incantation:
</p>
<pre>
  Jhead.new(&quot;*.jpg&quot;).save_thumbnail(&quot;thumbnails\&amp;i&quot;)
</pre>
<p>
would create a thumbnail for each .jpg file in the thumbnails directory by
the same name, (provided that the thumbnails directory exists, of course).
Both Win32 and most UNIX shells treat the &#8217;&amp;&#8217; character in
a special way, so you have to put quotes around that command line option
for the &#8217;&amp;&#8217; to even be passed to the program.
</p>
<p>
(UNIX build only) If a &#8217;-&#8217; is specified for the output file,
the thumbnail is sent to stdout.
</p>
					

					
					<div class="method-source-code"
						id="save-thumbnail-source">
<pre>
     <span class="ruby-comment cmt"># File jhead.rb, line 440</span>
440:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">save_thumbnail</span>(<span class="ruby-identifier">name</span>)
441:     <span class="ruby-constant">Jhead</span>.<span class="ruby-identifier">call</span>(<span class="ruby-value str">&quot;-st&quot;</span>, <span class="ruby-identifier">name</span>.<span class="ruby-identifier">shellescape</span>, <span class="ruby-ivar">@pattern</span>)
442:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="to-hash-method" class="method-detail ">
				<a name="method-i-to_hash"></a>

				<div class="method-heading">
				
					<span class="method-name">to_hash</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="to-hash-source">
<pre>
     <span class="ruby-comment cmt"># File jhead.rb, line 139</span>
139:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">to_hash</span>
140:     <span class="ruby-identifier">data</span>.<span class="ruby-identifier">merge</span>(<span class="ruby-value">:width</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">width</span>, <span class="ruby-value">:height</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">height</span>) <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">many?</span>
141:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="transplant-exif-method" class="method-detail ">
				<a name="method-i-transplant_exif"></a>

				<div class="method-heading">
				
					<span class="method-name">transplant_exif</span><span
						class="method-args">(name)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Transplant Exif header from image <name> into specified image. This option
is useful if you like to edit the photos but still want the Exif header on
your photos. As most photo editing programs will wipe out the Exif header,
this option can be used to re-transplant them back in after editing the
photos. This feature has an interesting &#8216;relative path&#8217; option
for specifying the thumbnail name. Whenever the <name> contains the
characters &#8217;&amp;i&#8217;, jhead will substitute the original
filename for this name. This allows creating a &#8216;relative name&#8217;
when doing a whole batch of files.
</p>
<p>
For example, the incantation:
</p>
<pre>
  Jhead.new(&quot;*.jpg&quot;).transplant_exif &quot;originals\&amp;i&quot;
</pre>
<p>
would transfer the Exif header for each .jpg file in the originals
directory by the same name, Both Win32 and most UNIX shells treat the
&#8217;&amp;&#8217; character in a special way, so you have to put quotes
around that command line option for the &#8217;&amp;&#8217; to even be
passed to the program.
</p>
					

					
					<div class="method-source-code"
						id="transplant-exif-source">
<pre>
     <span class="ruby-comment cmt"># File jhead.rb, line 164</span>
164:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">transplant_exif</span>(<span class="ruby-identifier">name</span>)
165:     <span class="ruby-constant">Jhead</span>.<span class="ruby-identifier">call</span>(<span class="ruby-value str">&quot;-te&quot;</span>, <span class="ruby-identifier">name</span>.<span class="ruby-identifier">shellescape</span>, <span class="ruby-ivar">@pattern</span>)
166:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="update-exif-time-stamp-method" class="method-detail ">
				<a name="method-i-update_exif_time_stamp"></a>

				<div class="method-heading">
				
					<span class="method-name">update_exif_time_stamp</span><span
						class="method-args">(mkexif = false)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Sets the Exif timestamp to the file&#8217;s timestamp. Requires an Exif
header to pre-exist. set mkexif option to true to create one if needed.
</p>
					

					
					<div class="method-source-code"
						id="update-exif-time-stamp-source">
<pre>
     <span class="ruby-comment cmt"># File jhead.rb, line 242</span>
242:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">update_exif_time_stamp</span>(<span class="ruby-identifier">mkexif</span> = <span class="ruby-keyword kw">false</span>)
243:     <span class="ruby-identifier">make_exif</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">mkexif</span> <span class="ruby-comment cmt"># Good idea or not?</span>
244:     <span class="ruby-identifier">out</span> = <span class="ruby-constant">Jhead</span>.<span class="ruby-identifier">call</span>(<span class="ruby-value str">&quot;-dsft&quot;</span>, <span class="ruby-value str">&quot;-q&quot;</span>, <span class="ruby-ivar">@pattern</span>)
245:     <span class="ruby-identifier">raise</span>(<span class="ruby-constant">JheadError</span>, <span class="ruby-identifier">out</span>) <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">out</span>.<span class="ruby-identifier">empty?</span>
246:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="update-system-time-stamp-method" class="method-detail ">
				<a name="method-i-update_system_time_stamp"></a>

				<div class="method-heading">
				
					<span class="method-name">update_system_time_stamp</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Sets the file&#8217;s system time stamp to what is stored in the Exif
header.
</p>
					

					
					<div class="method-source-code"
						id="update-system-time-stamp-source">
<pre>
     <span class="ruby-comment cmt"># File jhead.rb, line 234</span>
234:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">update_system_time_stamp</span>
235:     <span class="ruby-identifier">out</span> = <span class="ruby-constant">Jhead</span>.<span class="ruby-identifier">call</span>(<span class="ruby-value str">&quot;-ft&quot;</span>, <span class="ruby-value str">&quot;-q&quot;</span>, <span class="ruby-ivar">@pattern</span>)
236:     <span class="ruby-identifier">raise</span>(<span class="ruby-constant">JheadError</span>, <span class="ruby-identifier">out</span>) <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">out</span>.<span class="ruby-identifier">empty?</span>
237:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="width-method" class="method-detail ">
				<a name="method-i-width"></a>

				<div class="method-heading">
				
					<span class="method-name">width</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
Get the width of the jpeg file.
</p>
					

					
					<div class="method-source-code"
						id="width-source">
<pre>
     <span class="ruby-comment cmt"># File jhead.rb, line 130</span>
130:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">width</span>
131:     <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">resolution</span>.<span class="ruby-identifier">first</span> <span class="ruby-keyword kw">unless</span> <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">resolution</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">many?</span>
132:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
		</div>
	
		<div id="private-instance-method-details" class="method-section section">
			<h3 class="section-header">Private Instance Methods</h3>

		
			<div id="parse-tag-method" class="method-detail ">
				<a name="method-i-parse_tag"></a>

				<div class="method-heading">
				
					<span class="method-name">parse_tag</span><span
						class="method-args">(str)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="parse-tag-source">
<pre>
     <span class="ruby-comment cmt"># File jhead.rb, line 546</span>
546:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_tag</span>(<span class="ruby-identifier">str</span>)
547:     <span class="ruby-identifier">tag</span> = <span class="ruby-identifier">str</span>.<span class="ruby-identifier">downcase</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp re">/[\s\/]/</span>, <span class="ruby-value str">'_'</span>).<span class="ruby-identifier">chomp</span>(<span class="ruby-value str">'.'</span>).<span class="ruby-identifier">to_sym</span>
548:     <span class="ruby-keyword kw">unless</span> <span class="ruby-constant">TAGS</span>.<span class="ruby-identifier">include?</span> <span class="ruby-identifier">tag</span>
549:       <span class="ruby-comment cmt"># To avoid possibles mistakes between jhead output and the wrapper.</span>
550:       <span class="ruby-identifier">raise</span>(<span class="ruby-constant">JheadError</span>, <span class="ruby-node">&quot;Tag #{tag} (from #{str}) not valid.&quot;</span>)
551:     <span class="ruby-keyword kw">end</span>
552:     <span class="ruby-identifier">tag</span>
553:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="parse-value-method" class="method-detail ">
				<a name="method-i-parse_value"></a>

				<div class="method-heading">
				
					<span class="method-name">parse_value</span><span
						class="method-args">(str)</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					
					

					
					<div class="method-source-code"
						id="parse-value-source">
<pre>
     <span class="ruby-comment cmt"># File jhead.rb, line 555</span>
555:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">parse_value</span>(<span class="ruby-identifier">str</span>)
556:     <span class="ruby-keyword kw">case</span> <span class="ruby-identifier">str</span>
557:     <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/^(\d{4}):(\d\d):(\d\d) (\d\d):(\d\d):(\d\d)$/</span>
558:       <span class="ruby-constant">Time</span>.<span class="ruby-identifier">mktime</span>(<span class="ruby-node">$1</span>, <span class="ruby-node">$2</span>, <span class="ruby-node">$3</span>, <span class="ruby-node">$4</span>, <span class="ruby-node">$5</span>, <span class="ruby-node">$6</span>) <span class="ruby-keyword kw">rescue</span> <span class="ruby-keyword kw">nil</span>
559:     <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/^(No|Yes)$/</span> <span class="ruby-keyword kw">then</span> <span class="ruby-node">$1</span> <span class="ruby-operator">==</span> <span class="ruby-value str">&quot;Yes&quot;</span>
560:     <span class="ruby-keyword kw">when</span> <span class="ruby-regexp re">/^(\d+) x (\d+)$/</span> <span class="ruby-keyword kw">then</span> [<span class="ruby-node">$1</span>.<span class="ruby-identifier">to_i</span>, <span class="ruby-node">$2</span>.<span class="ruby-identifier">to_i</span>]
561:     <span class="ruby-keyword kw">else</span> <span class="ruby-identifier">str</span>
562:     <span class="ruby-keyword kw">end</span>
563:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
			<div id="write-with-temp-method" class="method-detail ">
				<a name="method-i-write_with_temp"></a>

				<div class="method-heading">
				
					<span class="method-name">write_with_temp</span><span
						class="method-args">()</span>
					<span class="method-click-advice">click to toggle source</span>
				
				</div>

				<div class="method-description">
					
					<p>
test. Useful?
</p>
					

					
					<div class="method-source-code"
						id="write-with-temp-source">
<pre>
     <span class="ruby-comment cmt"># File jhead.rb, line 566</span>
566:   <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">write_with_temp</span>
567:     <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">many?</span>
568:       <span class="ruby-comment cmt">#TODO. Bad, because cannot cp a file to *.jpg e.g.</span>
569:       <span class="ruby-comment cmt"># should use @target = Dir[pattern] in constructor.</span>
570:       <span class="ruby-identifier">tempfile</span> = <span class="ruby-constant">Tempfile</span>.<span class="ruby-identifier">new</span>(<span class="ruby-value str">&quot;jhead&quot;</span>).<span class="ruby-identifier">path</span>
571:       <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">cp</span>(<span class="ruby-ivar">@pattern</span>, <span class="ruby-identifier">tempfile</span>)
572: 
573:       <span class="ruby-keyword kw">yield</span> <span class="ruby-identifier">tempfile</span>
574: 
575:       <span class="ruby-keyword kw">unless</span> <span class="ruby-identifier">tempfile</span> <span class="ruby-operator">==</span> <span class="ruby-ivar">@pattern</span>
576:         <span class="ruby-comment cmt">#TODO not this test. find another one.</span>
577:         <span class="ruby-identifier">raise</span>(<span class="ruby-constant">JheadError</span>, <span class="ruby-value str">&quot;Writing went awry on temp file, cancelled.&quot;</span>)
578:       <span class="ruby-keyword kw">end</span>
579:       <span class="ruby-constant">FileUtils</span>.<span class="ruby-identifier">cp</span>(<span class="ruby-identifier">tempfile</span>, <span class="ruby-ivar">@pattern</span>)
580:     <span class="ruby-keyword kw">end</span>
581:   <span class="ruby-keyword kw">end</span></pre>
					</div>
					
				</div>

				

				
			</div>

		
		</div>
	

	</div>


	<div id="rdoc-debugging-section-dump" class="debugging-section">
	
		<p>Disabled; run with --debug to generate this.</p>
	
	</div>

	<div id="validator-badges">
		<p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
		<p><small>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish
			Rdoc Generator</a> 1.1.6</small>.</p>
	</div>

</body>
</html>

